(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,53674,(e,r,t)=>{r.exports=e.r(36518)},67879,e=>{"use strict";async function r(e){try{let r=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),t=await r.json();return t.success&&localStorage.setItem("auth_token",e),t}catch(e){throw console.error("Login error:",e),e}}function t(){let e=localStorage.getItem("auth_token"),r={"Content-Type":"application/json"};return e&&(r.Authorization=`Bearer ${e}`),r}async function o(e=0,r=20){try{let o=await fetch(`/api/random-image?offset=${e}&limit=${r}`,{method:"GET",headers:t()});if(!o.ok){if(401===o.status)throw window.location.href="/login",Error("Unauthorized");throw Error(`HTTP error! status: ${o.status}`)}let a=await o.json();if(!a.success||!a.data)throw Error("API request failed");return a.data.map(e=>({id:e.image_id,src:e.img_webp?c(e.img_webp):"",category:e.category,description:e.description,create_time:e.create_time,real_src:e.image_path?c(e.image_path):""}))}catch(e){throw console.error("Error fetching images:",e),e}}async function a(e,r=0,o=20){try{let a=await fetch(`/api/search?keyword=${encodeURIComponent(e)}&offset=${r}&limit=${o}`,{method:"GET",headers:t()});if(!a.ok){if(401===a.status)throw window.location.href="/login",Error("Unauthorized");throw Error(`HTTP error! status: ${a.status}`)}let i=await a.json();if(!i.success||!i.data)throw Error("API request failed");return i.data.map(e=>({id:e.image_id,src:e.img_webp?c(e.img_webp):"",category:e.category,description:e.description,create_time:e.create_time,real_src:e.image_path?c(e.image_path):""}))}catch(e){throw console.error("Error searching images:",e),e}}async function i(e){try{let r=await fetch("/api/describe-image",{method:"POST",headers:t(),body:JSON.stringify({image_id:e})});if(!r.ok){if(401===r.status)throw window.location.href="/login",Error("Unauthorized");throw Error(`HTTP error! status: ${r.status}`)}let o=await r.json();if(!o.success)throw Error("API request failed");return o.data}catch(e){throw console.error("Error describing image:",e),e}}async function s(e){try{let r=await fetch(`/api/delete_image/${e}`,{method:"DELETE",headers:t()});if(!r.ok){if(401===r.status)throw window.location.href="/login",Error("Unauthorized");throw Error(`HTTP error! status: ${r.status}`)}let o=await r.json();if(!o.success)throw Error(o.message||"Failed to delete image")}catch(e){throw console.error("Error deleting image:",e),e}}async function n(e=0,r=20){try{let o=await fetch(`/api/images_by_time?offset=${e}&limit=${r}`,{method:"GET",headers:t()});if(!o.ok){if(401===o.status)throw window.location.href="/login",Error("Unauthorized");throw Error(`HTTP error! status: ${o.status}`)}let a=await o.json();if(!a.success||!a.data)throw Error("API request failed");return a.data.map(e=>({id:e.image_id,src:e.img_webp?c(e.img_webp):"",category:e.category,description:e.description,create_time:e.create_time,real_src:e.image_path?c(e.image_path):""}))}catch(e){throw console.error("Error fetching images by time:",e),e}}function c(e){return`/${e.replace(/\\/g,"/")}`}e.i(35939),e.s(["deleteImage",()=>s,"describeImage",()=>i,"fetchImagesByTime",()=>n,"fetchRandomImages",()=>o,"login",()=>r,"searchImages",()=>a],67879)},74382,e=>{"use strict";var r=e.i(52608),t=e.i(43942),o=e.i(53674),a=e.i(67879);e.s(["default",0,()=>{let e=(0,o.useRouter)(),[i,s]=(0,t.useState)(""),[n,c]=(0,t.useState)(!1),[l,d]=(0,t.useState)(""),h=async()=>{if(!i.trim())return void d("è¯·è¾“å…¥token");c(!0),d("");try{let r=await (0,a.login)(i);r.success?e.push("/"):d(r.message||"ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥tokenæ˜¯å¦æ­£ç¡®")}catch(e){d("ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"),console.error("Login error:",e)}finally{c(!1)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center mb-6",children:[(0,r.jsx)("img",{src:"/logo.png",alt:"Logo",className:"w-16 h-16 rounded-full mr-3 border-2 border-purple-200"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-black",children:"Web Login"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Token"}),(0,r.jsx)("input",{type:"text",value:i,onChange:e=>s(e.target.value),placeholder:"è¯·è¾“å…¥token",disabled:n,className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed"}),(0,r.jsx)("p",{className:"text-xs text-yellow-500 mt-1",children:"ğŸ’¡ æç¤ºï¼šä¿®æ”¹configä¸­çš„å¯†é’¥åé‡å¯æœåŠ¡ç”Ÿæ•ˆã€‚"})]}),l&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-2 rounded-lg text-sm",children:l}),(0,r.jsx)("button",{onClick:h,disabled:n,className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"ç™»å½•ä¸­..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,r.jsxs)("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[(0,r.jsx)("path",{strokeLinecap:"round",d:"M8 16c0 2.828 0 4.243.879 5.121C9.757 22 11.172 22 14 22h1c2.828 0 4.243 0 5.121-.879C21 20.243 21 18.828 21 16V8c0-2.828 0-4.243-.879-5.121C19.243 2 17.828 2 15 2h-1c-2.828 0-4.243 0-5.121.879C8 3.757 8 5.172 8 8"}),(0,r.jsx)("path",{d:"M8 19.5c-2.357 0-3.536 0-4.268-.732C3 18.035 3 16.857 3 14.5v-5c0-2.357 0-3.536.732-4.268S5.643 4.5 8 4.5",opacity:"0.5"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12h9m0 0l-2.5 2.5M15 12l-2.5-2.5"})]})}),"ç™»å½•"]})})]})]})})}])}]);